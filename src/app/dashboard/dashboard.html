<div class="dashboard-container">
  <!-- Header -->
  <header class="header">
    <div class="logo">
      <a routerLink="/">
        <img src="SFLU_ambassador_logo.svg" alt="Logo" class="logo-image" height="100px" width="100px" draggable="false"/>
      </a>
    </div>
    <div class="header-actions">
      <div class="user-profile">
        <span class="user-name">{{ userName }}</span>
        <div class="user-avatar">{{ userName.charAt(0) }}</div>
      </div>
      <app-button routerLink="/">
        –í–∏–π—Ç–∏
      </app-button>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <div class="content-wrapper">
      <!-- Welcome Section -->
      <section class="welcome-section">
        <h1 class="welcome-title">–í—ñ—Ç–∞—î–º–æ, {{ userName }}–µ! üëã</h1>
        <p class="welcome-subtitle">–í–∞—à–∞ –ø–∞–Ω–µ–ª—å –∞–º–±–∞—Å–∞–¥–æ—Ä–∞</p>
      </section>

      <!-- Stats Cards -->
      <section class="stats-section">
        <div class="stat-card credits-card">
          <div class="stat-icon">üíé</div>
          <div class="stat-content">
            <div class="stat-label">–ó–∞–≥–∞–ª—å–Ω—ñ –∫—Ä–µ–¥–∏—Ç–∏</div>
            <div class="stat-value">{{ totalCredits }}</div>
          </div>
        </div>

        <div class="stat-card completed-card">
          <div class="stat-icon">‚úÖ</div>
          <div class="stat-content">
            <div class="stat-label">–ó–∞–≤–µ—Ä—à–µ–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è</div>
            <div class="stat-value">{{ completedTasks }}</div>
          </div>
        </div>

        <div class="stat-card pending-card">
          <div class="stat-icon">üìã</div>
          <div class="stat-content">
            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è</div>
            <div class="stat-value">{{ pendingTasks }}</div>
          </div>
        </div>
      </section>

      <!-- Navigation Tabs -->
      <nav class="nav-tabs">
        <button
          class="nav-tab"
          [class.active]="currentView === 'tasks'"
          (click)="setView('tasks')">
          üìã –ó–∞–≤–¥–∞–Ω–Ω—è
        </button>
        <button
          class="nav-tab"
          [class.active]="currentView === 'events'"
          (click)="setView('events')">
          üìÖ –ü–æ–¥—ñ—ó
        </button>
        <button
          class="nav-tab"
          [class.active]="currentView === 'leaderboard'"
          (click)="setView('leaderboard')">
          üèÜ –†–µ–π—Ç–∏–Ω–≥
        </button>
        <button
          class="nav-tab"
          [class.active]="currentView === 'prizes'"
          (click)="setView('prizes')">
          üéÅ –ü—Ä–∏–∑–∏
        </button>
        <button
          class="nav-tab"
          [class.active]="currentView === 'chat'"
          (click)="setView('chat')">
          üí¨ –ß–∞—Ç
        </button>
      </nav>

      <!-- Tasks View -->
      <section class="tasks-view" *ngIf="currentView === 'tasks'">
        <div class="section-header">
          <h2 class="section-title">–ê–∫—Ç–∏–≤–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è</h2>
          <span class="task-count">{{ activeTasks.length }}</span>
        </div>

        <div class="tasks-grid">
          <div *ngFor="let task of activeTasks" class="task-card" [class]="getStatusClass(task.status)">
            <div class="task-header">
              <div class="task-category">{{ task.category }}</div>
              <div class="task-credits">
                <span class="credit-icon">üíé</span>
                <span class="credit-value">{{ task.credits }}</span>
              </div>
            </div>

            <h3 class="task-title">{{ task.title }}</h3>
            <p class="task-description">{{ task.description }}</p>

            <div class="task-footer">
              <div class="task-deadline">
                <span class="deadline-icon">üìÖ</span>
                <span class="deadline-text">{{ formatDate(task.deadline) }}</span>
                <span class="deadline-days" [class.urgent]="getDaysUntilDeadline(task.deadline) <= 2">
                  ({{ getDaysUntilDeadline(task.deadline) }} –¥–Ω—ñ–≤)
                </span>
              </div>
              <div class="task-status" [class]="getStatusClass(task.status)">
                {{ getStatusText(task.status) }}
              </div>
            </div>

            <app-button class="task-action-btn">
              <span *ngIf="task.status === 'pending'">–ü–æ—á–∞—Ç–∏</span>
              <span *ngIf="task.status === 'in-progress'">–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</span>
            </app-button>
          </div>
        </div>
      </section>

      <!-- Events View -->
      <section class="events-view" *ngIf="currentView === 'events'">
        <div class="section-header">
          <h2 class="section-title">–ù–∞–π–±–ª–∏–∂—á—ñ –ø–æ–¥—ñ—ó</h2>
          <span class="task-count">{{ upcomingEvents.length }}</span>
        </div>

        <div class="events-grid">
          <div *ngFor="let event of upcomingEvents" class="event-card">
            <div class="event-type-badge" [class]="event.type">
              {{ event.type === 'online' ? 'üåê –û–Ω–ª–∞–π–Ω' : 'üìç –û—Ñ–ª–∞–π–Ω' }}
            </div>

            <h3 class="event-title">{{ event.title }}</h3>
            <p class="event-description">{{ event.description }}</p>

            <div class="event-details">
              <div class="event-detail">
                <span class="detail-icon">üìÖ</span>
                <span class="detail-text">{{ formatDateTime(event.date) }}</span>
              </div>
              <div class="event-detail">
                <span class="detail-icon">üìç</span>
                <span class="detail-text">{{ event.location }}</span>
              </div>
              <div class="event-detail">
                <span class="detail-icon">üë•</span>
                <span class="detail-text">{{ event.attendees }}/{{ event.maxAttendees }} —É—á–∞—Å–Ω–∏–∫—ñ–≤</span>
              </div>
            </div>

            <div class="event-progress">
              <div class="progress-bar">
                <div class="progress-fill" [style.width.%]="(event.attendees / event.maxAttendees) * 100"></div>
              </div>
            </div>

            <app-button class="event-action-btn" (click)="attendEvent(event.id)">
              –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è
            </app-button>
          </div>
        </div>
      </section>

      <!-- Leaderboard View -->
      <section class="leaderboard-view" *ngIf="currentView === 'leaderboard'">
        <div class="section-header">
          <h2 class="section-title">–¢–∞–±–ª–∏—Ü—è –ª—ñ–¥–µ—Ä—ñ–≤</h2>
          <span class="task-count">–¢–æ–ø {{ leaderboard.length }}</span>
        </div>

        <div class="leaderboard-list">
          <div *ngFor="let user of leaderboard" class="leaderboard-item" [class.current-user]="user.name.includes(userName)">
            <div class="rank-badge" [class]="getRankColor(user.rank)">
              <span class="rank-number">{{ user.rank }}</span>
            </div>

            <div class="user-avatar-large">{{ user.avatar }}</div>

            <div class="user-info">
              <div class="user-name-large">{{ user.name }}</div>
              <div class="user-stats">
                <span class="stat-item">üíé {{ user.credits }}</span>
                <span class="stat-item">‚úÖ {{ user.tasksCompleted }} –∑–∞–≤–¥–∞–Ω—å</span>
              </div>
            </div>

            <div class="leaderboard-credits">
              {{ user.credits }}
            </div>
          </div>
        </div>
      </section>

      <!-- Prizes View -->
      <section class="prizes-view" *ngIf="currentView === 'prizes'">
        <div class="section-header">
          <h2 class="section-title">–ú–∞–≥–∞–∑–∏–Ω –ø—Ä–∏–∑—ñ–≤</h2>
          <span class="task-count">{{ availablePrizes.length }} –¥–æ—Å—Ç—É–ø–Ω–æ</span>
        </div>

        <div class="prizes-grid">
          <div *ngFor="let prize of prizes" class="prize-card" [class.unavailable]="!prize.available || !canAffordPrize(prize.credits)">
            <div class="prize-image">{{ prize.image }}</div>

            <div class="prize-category">{{ prize.category }}</div>
            <h3 class="prize-title">{{ prize.title }}</h3>
            <p class="prize-description">{{ prize.description }}</p>

            <div class="prize-cost">
              <span class="credit-icon">üíé</span>
              <span class="credit-value">{{ prize.credits }}</span>
            </div>

            <app-button
              class="prize-action-btn"
              [class.disabled]="!prize.available || !canAffordPrize(prize.credits)"
              (click)="redeemPrize(prize.id)">
              <span *ngIf="!prize.available">–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ</span>
              <span *ngIf="prize.available && !canAffordPrize(prize.credits)">–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –∫—Ä–µ–¥–∏—Ç—ñ–≤</span>
              <span *ngIf="prize.available && canAffordPrize(prize.credits)">–û–±–º—ñ–Ω—è—Ç–∏</span>
            </app-button>
          </div>
        </div>
      </section>

      <!-- Chat View -->
      <section class="chat-view" *ngIf="currentView === 'chat'">
        <div class="section-header">
          <h2 class="section-title">–ß–∞—Ç –∞–º–±–∞—Å–∞–¥–æ—Ä—ñ–≤</h2>
          <span class="task-count">–û–Ω–ª–∞–π–Ω</span>
        </div>

        <div class="chat-container">
          <div class="chat-messages">
            <div *ngFor="let msg of chatMessages" class="chat-message" [class.own-message]="msg.isOwn">
              <div class="message-avatar">{{ msg.avatar }}</div>
              <div class="message-content">
                <div class="message-header">
                  <span class="message-sender">{{ msg.sender }}</span>
                  <span class="message-time">{{ formatTime(msg.timestamp) }}</span>
                </div>
                <div class="message-text">{{ msg.message }}</div>
              </div>
            </div>
          </div>

          <div class="chat-input-container">
            <app-text-field
              placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..."
              type="text"
              [value]="chatMessage"
              (valueChange)="chatMessage = $event">
            </app-text-field>
            <app-button class="send-btn" (click)="sendMessage()">
              –ù–∞–¥—ñ—Å–ª–∞—Ç–∏
            </app-button>
          </div>
        </div>
      </section>
    </div>
  </main>
</div>

